
<!-- Backdrop with click-outside detection -->
<div id="backdrop" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"
     (click)="onBackdropClick($event)">

    <!-- Dialog Box -->
    <div class="bg-gray-900 text-white rounded-xl w-full max-w-md shadow-lg relative border border-gray-700"
         (click)="$event.stopPropagation()">

        <!-- Header -->
        <div class="px-4 py-2 flex justify-between items-center border-b border-gray-700">
            <h2 class="text-lg font-semibold">Enter complete address</h2>
            <button class="text-gray-400 hover:text-red-500 text-2xl" (click)="closeDialog.emit()">&times;</button>
        </div>

        <!-- Body -->
        <div class="px-6 py-2 space-y-4">
            <!-- Label -->
            <div class="flex flex-col gap-2">
                <span class="text-xs">Save address as *</span>
                <div *ngIf="!tempAddress?.isCustomLabel();" class="flex gap-2 items-center">
                    <button (click)="handleLabelBtnClick('Home')"
                            class="p-2 flex gap-2 items-center rounded-md"
                            [ngClass]="{
                            'border-2 border-green-700' : tempAddress != null && tempAddress.getLabel() === 'Home',
                            'border border-gray-700' : tempAddress != null && tempAddress.getLabel() !== 'Home'
                            }">
                        <img class="w-4 h-4" src="/assets/icons/01-sample-icon.svg" alt="dropdown-icon">
                        <span>Home</span>
                    </button>

                    <button (click)="handleLabelBtnClick('Work')"
                            class="p-2 flex gap-2 items-center rounded-md"
                            [ngClass]="{
                            'border-2 border-green-700' : tempAddress != null && tempAddress.getLabel() === 'Work',
                            'border border-gray-700' : tempAddress != null && tempAddress.getLabel() !== 'Work'
                            }">
                        <img class="w-4 h-4" src="/assets/icons/01-sample-icon.svg" alt="dropdown-icon">
                        <span>Work</span>
                    </button>

                    <button (click)="handleLabelBtnClick('Other')"
                            class="p-2 flex gap-2 items-center rounded-md border border-gray-700">
                        <img class="w-4 h-4" src="/assets/icons/01-sample-icon.svg" alt="dropdown-icon">
                        <span>Other</span>
                    </button>
                </div>

                <!-- When Label is neither Home nor Work i.e. Other -->
                <div *ngIf="tempAddress?.isCustomLabel()" class="flex gap-2 ">
                    <button (click)="handleLabelBtnClick('')"
                            class="p-2 flex gap-2 items-center rounded-md border-2 border-green-700">
                        <img class="w-4 h-4" src="/assets/icons/01-sample-icon.svg" alt="dropdown-icon">
                        <span>Other</span>
                    </button>
                    <input type="text"
                           [(ngModel)]="strCustomLabelInput"
                           placeholder="Label"
                           class="w-[50%] bg-transparent border-b border-gray-600 outline-none text-white text-sm"/>
                </div>

            </div>

            <!--
                        <div class="flex items-center gap-2">
                            <div class="bg-green-600 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1">
                                <img class="w-4 h-4" src="/assets/icons/01-sample-icon.svg" alt="dropdown-icon">
                                {{ address.getLabel() }}
                            </div>
                            <input [(ngModel)]="address['label']"
                                   placeholder="Label"
                                   class="bg-transparent border-b border-gray-600 outline-none text-white w-full text-sm"/>
                        </div>
            -->

            <!-- House No -->
            <input [(ngModel)]="tempAddress!['houseNumberOrName']"
                   placeholder="Flat / House no / Building name *"
                   class="w-full bg-gray-800 px-3 py-2 rounded-md placeholder-gray-400 text-sm"/>

            <!-- Floor -->
            <input [(ngModel)]="tempAddress!['floor']"
                   placeholder="Floor (optional)"
                   type="number"
                   class="w-full bg-gray-800 px-3 py-2 rounded-md placeholder-gray-400 text-sm"/>

            <!-- Area -->
            <input [(ngModel)]="tempAddress!['locality']"
                   placeholder="Area / Sector / Locality *"
                   class="w-full bg-gray-800 px-3 py-2 rounded-md placeholder-gray-400 text-sm font-medium"/>

            <!-- Landmark -->
            <!--
                        <input [(ngModel)]="tempAddress!['landmark']"
                               placeholder="Nearby landmark (optional)"
                               class="w-full bg-gray-800 px-3 py-2 rounded-md placeholder-gray-400 text-sm"/>
            -->

            <!-- Floating Label Input -->
            <!--
                        <div class="relative w-full">
                            &lt;!&ndash; Input Field &ndash;&gt;
                            <input [(ngModel)]="tempAddress!['landmark']"
                                   type="text"
                                   id="landmark"
                                   placeholder=" "
                                   class="peer w-full px-3 py-2 bg-gray-800 text-sm text-white rounded-md border
                                border-gray-600 placeholder-transparent focus:outline-none focus:border-cyan-400 focus:ring-0"/>

                            <label
                                for="landmark"
                                [ngClass]="{
                                  'text-xs -top-2 text-cyan-400 bg-gray-900 px-1': tempAddress?.getLandmark(),
                                  'top-2.5 text-sm text-gray-400': !tempAddress?.getLandmark()
                                }"
                                class="absolute left-3 transition-all duration-200 pointer-events-none">
                                Nearby landmark (optional)
                            </label>
                        </div>
            -->

            <!-- Floating Label Input -->
            <div class="relative w-full">
                <input [(ngModel)]="tempAddress!['landmark']"
                       type="text"
                       id="landmark"
                       placeholder=" "
                       class="peer w-full px-3 py-2 bg-gray-800 text-sm text-white rounded-md border
                    border-gray-600 placeholder-transparent focus:outline-none focus:border-cyan-400 focus:ring-0"/>

                <label for="landmark"
                       class="absolute left-3 top-2.5 text-sm text-gray-400 bg-gray-800 px-1
                        transition-all duration-200 pointer-events-none
                        peer-placeholder-shown:top-2.5 peer-placeholder-shown:text-sm
                         peer-placeholder-shown:text-gray-400 peer-focus:px-1
                        peer-focus:-top-2 peer-focus:text-xs peer-focus:text-cyan-400 peer-focus:bg-gray-900
                        peer-[&:not(:focus):not(:placeholder-shown)]:-top-2
                        peer-[&:not(:focus):not(:placeholder-shown)]:text-xs
                        peer-[&:not(:focus):not(:placeholder-shown)]:text-white
                        peer-[&:not(:focus):not(:placeholder-shown)]:bg-gray-900
                        peer-[&:not(:focus):not(:placeholder-shown)]:px-1">
                    Nearby landmark (optional)
                </label>
            </div>


            <!-- Floating Label Input -->
            <div class="relative w-full h-32">
                <input [(ngModel)]="tempAddress!['landmark']"
                       type="text"
                       id="landmark"
                       placeholder=""
                       class="peer w-full h-full px-3 py-2 bg-gray-800 text-sm text-white rounded-md border
                              border-gray-600 placeholder-transparent focus:outline-none focus:border-cyan-400
                              focus:ring-0"/>

                <label for="landmark"
                       class="absolute px-1 left-3 top-1/2 -translate-y-1/2 text-sm text-gray-400 bg-gray-800
                              transition-all duration-200 pointer-events-none
                              peer-placeholder-shown:text-sm peer-placeholder-shown:text-gray-400
                              peer-focus:top-0
                              peer-focus:text-2xl peer-focus:text-cyan-400 peer-focus:bg-gray-600
                              peer-focus:px-1 peer-[&:not(:focus):not(:placeholder-shown)]:top-0
                              peer-[&:not(:focus):not(:placeholder-shown)]:text-2xl
                              peer-[&:not(:focus):not(:placeholder-shown)]:text-white
                              peer-[&:not(:focus):not(:placeholder-shown)]:bg-gray-600
                              peer-[&:not(:focus):not(:placeholder-shown)]:px-1">
                    Nearby landmark (optional)
                </label>
            </div>

            <!-- Floating Label Input -->
            <div class="relative w-full h-32">
                <input [(ngModel)]="tempAddress!['landmark']"
                       type="text"
                       id="landmark"
                       placeholder=""
                       class="peer w-full h-full px-3 py-10 bg-gray-800 text-sm text-white rounded-md border-[10px]
                              border-gray-600 placeholder-transparent focus:outline-none focus:border-cyan-400
                              focus:ring-0"/>

                <label for="landmark"
                       class="absolute w-fit h-fit left-3 text-[24px] text-gray-400 bg-gray-800
                              transition-all duration-200 pointer-events-none border
                              peer-placeholder-shown:text-[24px] peer-placeholder-shown:text-gray-400
                              peer-placeholder-shown:top-1/2
                              peer-placeholder-shown:-translate-y-1/2
                              peer-focus:top-0
                              peer-focus:-translate-y-[calc(50%_-5px)]
                              peer-focus:text-[24px]
                              peer-focus:text-cyan-400 peer-focus:bg-gray-600
                              peer-focus:p-0
                              peer-[&:not(:focus):not(:placeholder-shown)]:top-0
                              peer-[&:not(:focus):not(:placeholder-shown)]:-translate-y-[calc(50%_-5px)]
                              peer-[&:not(:focus):not(:placeholder-shown)]:text-[24px]
                              peer-[&:not(:focus):not(:placeholder-shown)]:text-white
                              peer-[&:not(:focus):not(:placeholder-shown)]:bg-gray-600
                              peer-[&:not(:focus):not(:placeholder-shown)]:p-0">
                    Nearby landmark (optional)
                </label>
            </div>


            <div class="">
                <span class="text-xs">Enter your details for seamless delivery experience</span>

                <!-- Receiver Name -->
                <input [(ngModel)]="tempAddress!['receiverName']"
                       placeholder="Full name"
                       class="w-full my-2 bg-gray-800 px-3 py-2 rounded-md placeholder-gray-400 text-sm"/>

                <!-- Phone -->
                <input [(ngModel)]="tempAddress!['mobNumber']"
                       type="tel"
                       placeholder="Phone Number"
                       class="w-full my-2 bg-gray-800 px-3 py-2 rounded-md placeholder-gray-400 text-sm"/>

            </div>

        </div>

        <!-- Footer -->
        <div class="flex justify-between items-center p-4 border-t border-gray-700">
            <button (click)="handleSaveBtnClick()"
                    class="w-full px-4 py-2 bg-[#0a6920] text-[#bcbec5] font-medium rounded-md">Save Address
            </button>
        </div>

    </div>
</div>
